# 🌙 Bedtime Enforcer - 严格作息执行器

一个跨平台的睡眠习惯管理工具，帮助您建立规律的作息时间，通过强制关机来确保按时睡觉。

## 🌟 特性概述

- ⏰ **定时强制关机** - 在设定的睡觉时间自动关机
- 🔄 **自动开机** - 在设定的起床时间自动开机  
- 🚫 **禁止时段保护** - 如果在睡眠时间段开机会立即关机
- ⚡ **5分钟预警** - 关机前弹出警告对话框
- 🎨 **友好界面** - 清晰的状态信息和操作提示

## 📁 项目结构

```
lock-program/
├── 📄 README.md                 # 主说明文档 (本文件)
├── 🍎 macOS版本/
│   ├── bedtime_enforcer.sh      # macOS版本脚本
│   └── README.md                # macOS详细说明
└── 🪟 Windows版本/
    ├── bedtime_enforcer.ps1     # Windows PowerShell脚本
    ├── BedtimeEnforcer.bat      # Windows图形界面启动器
    └── README_Windows.md        # Windows详细说明
```

## 🎯 版本选择指南

### 🍎 macOS版本
**推荐给：** Mac用户，熟悉命令行操作的用户

**特点：**
- 使用bash脚本和AppleScript
- 通过LaunchAgent集成系统
- 使用pmset管理电源

**使用方法：**
```bash
# 启用
./bedtime_enforcer.sh --enable

# 禁用  
./bedtime_enforcer.sh --disable
```

### 🪟 Windows版本 ⭐ **推荐**
**推荐给：** Windows用户，希望图形界面操作的用户

**特点：**
- 功能更强大的PowerShell实现
- 直观的批处理菜单界面
- 任务计划程序可视化管理
- 更好的用户体验和错误处理

**使用方法：**
1. 右键点击 `BedtimeEnforcer.bat`
2. 选择 "以管理员身份运行"
3. 根据菜单提示操作

## 🆚 版本对比

| 特性 | macOS版本 | Windows版本 |
|------|-----------|-------------|
| **易用性** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **用户界面** | 命令行 + 对话框 | 图形菜单 + 对话框 |
| **任务管理** | launchctl (命令行) | 任务计划程序 (GUI) |
| **权限管理** | sudo密码 | UAC提示 |
| **自动开机** | pmset (较可靠) | powercfg + BIOS |
| **系统集成** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **功能完整性** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

## 🚀 快速开始

### 对于Windows用户 (推荐)

1. **下载文件**
   - `bedtime_enforcer.ps1`
   - `BedtimeEnforcer.bat`

2. **运行程序**
   - 右键点击 `BedtimeEnforcer.bat`
   - 选择 "以管理员身份运行"
   - 根据菜单提示操作

3. **首次设置**
   - 选择 [1] 启用严格作息模式
   - 程序会自动配置所有必要的任务

### 对于macOS用户

1. **下载文件**
   - `bedtime_enforcer.sh`

2. **设置权限**
   ```bash
   chmod +x bedtime_enforcer.sh
   ```

3. **启用程序**
   ```bash
   sudo -v  # 获取sudo权限
   ./bedtime_enforcer.sh --enable
   ```

## ⚙️ 默认配置

两个版本都使用相同的默认时间设置：

- **睡觉时间**: 22:30 (晚上10点30分)
- **起床时间**: 06:30 (早上6点30分)
- **禁止使用时段**: 22:30 - 06:30

## 🔧 自定义配置

### Windows版本
编辑 `bedtime_enforcer.ps1` 文件顶部：
```powershell
$BEDTIME_HOUR = 22        # 睡觉时间 - 小时
$BEDTIME_MINUTE = 30      # 睡觉时间 - 分钟
$WAKEUP_HOUR = 6          # 起床时间 - 小时  
$WAKEUP_MINUTE = 30       # 起床时间 - 分钟
```

### macOS版本
编辑 `bedtime_enforcer.sh` 文件顶部：
```bash
BEDTIME_HOUR=22      # 睡觉时间 - 小时
BEDTIME_MINUTE=30    # 睡觉时间 - 分钟
WAKEUP_HOUR=6        # 起床时间 - 小时
WAKEUP_MINUTE=30     # 起床时间 - 分钟
```

## 🛠️ 工作原理

### 核心机制（两个版本相同）
1. **定时关机**: 在指定时间强制关机
2. **自动开机**: 设置每天定时开机
3. **开机检查**: 在每次开机时自动检查当前时间
4. **时间验证**: 如果开机时间在禁止时段内，立即执行关机
5. **循环保护**: 形成"伪不允许开机"的效果

### 技术实现差异
- **Windows**: 使用任务计划程序 + PowerShell + Windows Forms
- **macOS**: 使用LaunchAgent + bash + AppleScript + pmset

## 💡 生物钟调整策略

配合这个技术工具，建议您采取以下行动：

### 🌅 **日间策略**
- **固定起床时间** - 包括周末也要坚持
- **晨光照射** - 起床后立即接受自然光
- **规律运动** - 有助于夜间更好入睡
- **避免午睡过长** - 控制在20-30分钟内

### 🌙 **夜间策略**
- **睡前1小时断网** - 停止使用电子设备
- **环境优化** - 保持卧室凉爽（18-22°C）、安静、黑暗
- **规律仪式** - 建立固定的睡前程序（如阅读、冥想）
- **避免刺激** - 不喝咖啡、不做剧烈运动

### 📊 **渐进调整**
- **第1周** - 每天提前15分钟睡觉
- **第2-3周** - 继续微调至目标时间
- **第4周以后** - 维持稳定作息，形成习惯

## ⚠️ 重要警告

1. **使用前保存工作** - 脚本会强制关机！
2. **渐进式调整** - 不要一次性改变太多
3. **坚持21天** - 形成稳定习惯需要时间
4. **周末也执行** - 避免"社交时差"破坏规律

## 🔍 故障排除

### 通用问题
- ✅ 确保以管理员/root权限运行
- ✅ 检查系统时间设置正确
- ✅ 验证BIOS中的自动开机设置

### Windows特定问题
- 检查PowerShell执行策略
- 验证任务计划程序中的任务状态
- 确保Windows Forms可用

### macOS特定问题
- 检查sudo权限
- 验证LaunchAgent加载状态
- 确保pmset权限正常

## 📖 详细文档

- **Windows用户**: 查看 [`README_Windows.md`](README_Windows.md)
- **macOS用户**: 查看当前目录下的详细说明

## 🤝 贡献与反馈

如果您在使用过程中遇到问题或有改进建议，欢迎提出反馈。

## 📄 许可证

本项目为开源项目，仅供个人学习和使用。

---

**记住：养成良好的睡眠习惯是一个渐进的过程，这个工具只是帮助您建立自律的辅助手段。最终目标是培养内在的时间管理意识。** 🌟

**建议：如果您是Windows用户，强烈推荐使用Windows版本，因为它提供了更好的用户体验和更完善的功能。** 🪟✨ 